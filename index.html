<!DOCTYPE html>
<html lang="es"><head>
  <meta charset="UTF-8">
  <title>Control Center Audio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- XLSX para leer Excels -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <style>
    :root {
      --bg-main: radial-gradient(circle at top left, #111827, #020617 55%);
      --bg-card: #020617;
      --bg-card-soft: #0b1120;
      --bg-pill: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --accent-strong: #22c55e;
      --accent-orange: #fdba74;
      --accent-red: #f97373;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.25);
      --border-strong: rgba(148, 163, 184, 0.6);
      --shadow-card: 0 18px 40px rgba(15, 23, 42, 0.65);
      --shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.45);
      --shadow-strong: 0 25px 50px rgba(15, 23, 42, 0.95);
      --radius-xl: 26px;
      --radius-lg: 20px;
      --radius-pill: 999px;
      --glass-strong: rgba(15, 23, 42, 0.84);
      --glass-soft: rgba(15, 23, 42, 0.72);
      --blur-strong: blur(22px);
      --blur-soft: blur(16px);
      --chip-bg: rgba(15, 23, 42, 0.92);
      --chip-border: rgba(148, 163, 184, 0.45);
      --danger: #fb7185;
      --warning: #fbbf24;
      --success: #4ade80;
      --muted: #6b7280;
      --danger-soft: rgba(248, 113, 113, 0.08);
      --warning-soft: rgba(251, 191, 36, 0.08);
      --success-soft: rgba(74, 222, 128, 0.08);
      --muted-soft: rgba(107, 114, 128, 0.15);
      --accent-blue-soft: rgba(59, 130, 246, 0.12);
      --accent-blue: #60a5fa;
      --accent-indigo: #818cf8;
      --accent-purple: #a855f7;
      --accent-pink: #ec4899;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      margin: 0;
      color: var(--text-main);
      background: radial-gradient(circle at top left, #020617 0, #000 40%, #020617 65%, #020617 100%);
      background-attachment: fixed;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 20px 16px;
      position: relative;
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      border-radius: 999px;
      opacity: 0.35;
      filter: blur(40px);
      pointer-events: none;
      z-index: 0;
      transition: opacity 0.4s ease;
    }

    body::before {
      width: 480px;
      height: 480px;
      background: radial-gradient(circle, rgba(59, 130, 246, 0.85), transparent 65%);
      top: -120px;
      left: -80px;
    }

    body::after {
      width: 520px;
      height: 520px;
      background: radial-gradient(circle, rgba(52, 211, 153, 0.85), transparent 60%);
      bottom: -160px;
      right: -120px;
    }

    .app-shell {
      position: relative;
      z-index: 1;
      width: min(1440px, 100%);
      max-width: 1440px;
      margin: 0 auto;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.97));
      border-radius: 28px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 24px 80px rgba(15, 23, 42, 0.9),
        0 0 100px rgba(56, 189, 248, 0.12);
      display: flex;
      min-height: min(900px, calc(100vh - 40px));
      max-height: calc(100vh - 40px);
      overflow: hidden;
    }

    .sidebar {
      width: 280px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.97));
      border-right: 1px solid rgba(148, 163, 184, 0.35);
      padding: 18px 18px 18px 18px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.16), transparent 65%),
        radial-gradient(circle at bottom right, rgba(52, 211, 153, 0.12), transparent 65%);
      opacity: 0.85;
      pointer-events: none;
      z-index: -1;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 8px 10px 10px;
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.88), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(148, 163, 184, 0.55);
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.85);
    }

    .logo-block {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-cube {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background:
        conic-gradient(from 200deg,
          rgba(56, 189, 248, 0.9),
          rgba(56, 189, 248, 0.15),
          rgba(56, 189, 248, 0.9));
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.85),
        0 14px 25px rgba(56, 189, 248, 0.55);
      position: relative;
      overflow: hidden;
    }

    .logo-inner {
      width: 23px;
      height: 23px;
      border-radius: 9px;
      background: radial-gradient(circle at 30% 0%, #0f172a, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e5e7eb;
      font-weight: 700;
      font-size: 12px;
      letter-spacing: 0.05em;
      text-shadow: 0 0 10px rgba(56, 189, 248, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .logo-glow {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 10% 0%, rgba(248, 250, 252, 0.6), transparent 60%),
        radial-gradient(circle at 80% 100%, rgba(56, 189, 248, 0.4), transparent 60%);
      mix-blend-mode: screen;
      opacity: 0.6;
      pointer-events: none;
    }

    .logo-text-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .product-name {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .product-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.4),
        0 0 12px rgba(22, 163, 74, 0.9);
    }

    .product-subtitle {
      font-size: 11px;
      color: #9ca3af;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .badge-ai {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.6);
      color: #e0f2fe;
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.95));
      box-shadow: 0 0 10px rgba(56, 189, 248, 0.75);
    }

    .sidebar-header-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .tag-env {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(163, 230, 53, 0.6);
      color: #ecfccb;
      background: radial-gradient(circle at 0% 0%, rgba(190, 242, 100, 0.3), rgba(15, 23, 42, 0.95));
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .sidebar-date {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sidebar-date-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(156, 163, 175, 0.85);
    }

    .sidebar-main {
      display: flex;
      flex-direction: column;
      gap: 16px;
      flex: 1;
      min-height: 0;
    }

    .sidebar-section {
      padding: 10px 10px;
      border-radius: 18px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.94), rgba(15, 23, 42, 0.98));
      box-shadow: 0 12px 35px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.45);
      position: relative;
      overflow: hidden;
    }

    .sidebar-section::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.38), transparent 55%);
      opacity: 0.12;
      pointer-events: none;
    }

    .sidebar-section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
    }

    .sidebar-section-title {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .sidebar-title-main {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .sidebar-pill {
      font-size: 9px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.55);
      color: #9ca3af;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .sidebar-title-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .sidebar-section-controls {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tiny-pill {
      font-size: 9px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.95);
      color: #9ca3af;
      cursor: default;
    }

    .tiny-indicator {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #4ade80, #22c55e);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4), 0 0 9px rgba(34, 197, 94, 0.9);
    }

    .centers-list {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
      position: relative;
      z-index: 1;
    }

    .centers-list::-webkit-scrollbar {
      width: 6px;
    }

    .centers-list::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.8);
      border-radius: 999px;
    }

    .centers-list::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(148, 163, 184, 0.5), rgba(148, 163, 184, 0.1));
      border-radius: 999px;
    }

    .center-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 7px 8px;
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.8);
      background: rgba(15, 23, 42, 0.96);
      cursor: pointer;
      position: relative;
      transition:
        background 0.16s ease,
        border-color 0.16s ease,
        box-shadow 0.16s ease,
        transform 0.12s ease;
    }

    .center-row::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: linear-gradient(90deg, rgba(56, 189, 248, 0.7), rgba(52, 211, 153, 0.7));
      opacity: 0;
      transition: opacity 0.18s ease;
      z-index: -1;
    }

    .center-row:hover {
      border-color: rgba(148, 163, 184, 0.85);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.9);
      transform: translateY(-1px);
    }

    .center-row.active {
      border-color: transparent;
      background: rgba(15, 23, 42, 0.96);
      box-shadow:
        0 12px 30px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .center-row.active::before {
      opacity: 1;
    }

    .center-row-main {
      display: flex;
      flex-direction: column;
      flex: 1;
      gap: 2px;
    }

    .center-name-line {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .center-name {
      font-size: 12px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .center-type-pill {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #9ca3af;
    }

    .center-subline {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .center-subline span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .center-subline-dot {
      width: 3px;
      height: 3px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.7);
    }

    .center-badge {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.9);
      color: #e0f2fe;
      background: rgba(15, 23, 42, 0.95);
      white-space: nowrap;
    }

    .sidebar-metrics {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(51, 65, 85, 0.9);
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.9);
      position: relative;
      z-index: 1;
    }

    .sidebar-metrics-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .sidebar-metrics-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sidebar-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #f97316, #ea580c);
      box-shadow:
        0 0 0 1px rgba(234, 88, 12, 0.5),
        0 0 10px rgba(234, 88, 12, 0.9);
    }

    .sidebar-metrics-sub {
      font-size: 11px;
      color: #6b7280;
    }

    .sidebar-metrics-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    .sidebar-kpi-pill {
      padding: 7px 8px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(55, 65, 81, 0.85);
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .sidebar-kpi-label {
      font-size: 10px;
      color: #9ca3af;
    }

    .sidebar-kpi-value {
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .sidebar-footer {
      margin-top: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding-top: 4px;
      border-top: 1px dashed rgba(55, 65, 81, 0.9);
    }

    .sidebar-footer-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .sidebar-user {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user-avatar {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: linear-gradient(135deg, #38bdf8, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0f172a;
      font-size: 14px;
      font-weight: 700;
      box-shadow:
        0 0 0 2px rgba(15, 23, 42, 0.95),
        0 0 15px rgba(56, 189, 248, 0.8);
    }

    .user-info {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .user-name {
      font-size: 12px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .user-role {
      font-size: 11px;
      color: #9ca3af;
    }

    .sidebar-footer-kpi {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      flex-direction: column;
      gap: 2px;
      text-align: right;
    }

    .sidebar-footer-kpi span {
      font-size: 12px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .btn-compact {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #e5e7eb;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
    }

    .btn-compact:hover {
      background: rgba(15, 23, 42, 1);
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.9);
    }

    .btn-compact:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn-compact-primary {
      border-color: rgba(56, 189, 248, 0.8);
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.98));
      color: #e0f2fe;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 25px rgba(56, 189, 248, 0.7);
    }

    .btn-compact-primary:hover {
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.5), rgba(15, 23, 42, 0.98));
    }

    .btn-compact .dot-badge {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #4ade80, #22c55e);
      box-shadow:
        0 0 0 1px rgba(34, 197, 94, 0.6),
        0 0 10px rgba(34, 197, 94, 0.95);
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 14px 16px 16px 14px;
      gap: 10px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.97)),
        radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
    }

    .main-topbar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 2px;
    }

    .topbar-left {
      display: flex;
      flex-direction: column;
      gap: 5px;
      flex: 1 1 auto;
      min-width: 0;
    }

    .topbar-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .topbar-title-main {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .topbar-title {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.03em;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .topbar-kpi-chip {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.97);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .topbar-kpi-chip strong {
      color: #e5e7eb;
      font-weight: 600;
    }

    .topbar-subtitle {
      font-size: 12px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .topbar-subtitle span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .topbar-subtitle-badge {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.5);
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .topbar-search {
      flex: 1 1 260px;
      position: relative;
      min-width: 220px;
    }

    .topbar-search input {
      width: 100%;
      border-radius: 999px;
      padding: 8px 12px 8px 28px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      color: #e5e7eb;
      font-size: 12px;
      outline: none;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 8px 18px rgba(15, 23, 42, 0.9);
    }

    .topbar-search input::placeholder {
      color: #6b7280;
    }

    .topbar-search-icon {
      position: absolute;
      left: 9px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
      color: #6b7280;
    }

    .topbar-controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pill-toggle-group {
      display: inline-flex;
      padding: 3px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.98);
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.9);
    }

    .pill-toggle {
      font-size: 11px;
      padding: 3px 10px;
      border-radius: 999px;
      border: none;
      background: transparent;
      color: #9ca3af;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.12s ease, color 0.12s ease, box-shadow 0.12s ease, transform 0.08s ease;
    }

    .pill-toggle span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.55);
    }

    .pill-toggle.active {
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.98));
      color: #e0f2fe;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 16px rgba(56, 189, 248, 0.8);
      transform: translateY(-1px);
    }

    .pill-toggle.active span.dot {
      background: radial-gradient(circle, #4ade80, #22c55e);
      box-shadow:
        0 0 0 1px rgba(34, 197, 94, 0.7),
        0 0 10px rgba(34, 197, 94, 0.95);
    }

    .pill-toggle-date {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.98);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.9);
    }

    .pill-toggle-date strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .pill-toggle-date small {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
    }

    .pill-toggle-date span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .content {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.15fr);
      gap: 10px;
      min-height: 0;
    }

    .panel {
      border-radius: 22px;
      padding: 10px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(51, 65, 85, 0.95);
      box-shadow:
        0 8px 30px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 3px;
    }

    .panel-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .panel-title-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 7px;
    }

    .panel-pill {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .panel-subtitle {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .panel-subtitle span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .panel-subtitle strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .pill-trend {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.7);
      color: #bbf7d0;
      background: rgba(22, 101, 52, 0.2);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .panel-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill-indicator {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pill-indicator span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.5),
        0 0 8px rgba(22, 163, 74, 0.95);
    }

    .pill-indicator.alert span.dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 8px rgba(248, 113, 113, 0.95);
    }

    .panel-body {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      min-height: 0;
    }

    .card {
      border-radius: 16px;
      padding: 8px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 0;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .card-title {
      font-size: 11px;
      color: #9ca3af;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .card-subtitle {
      font-size: 11px;
      color: #6b7280;
    }

    .badge-soft {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
    }

    .card-body {
      display: flex;
      flex-direction: column;
      gap: 5px;
      min-height: 0;
    }

    .kpi-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .kpi-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .kpi-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .kpi-value {
      font-size: 18px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .kpi-badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.7);
      color: #bbf7d0;
      background: rgba(22, 101, 52, 0.3);
    }

    .kpi-badge.warning {
      border-color: rgba(234, 179, 8, 0.8);
      color: #fef9c3;
      background: rgba(113, 63, 18, 0.4);
    }

    .kpi-badge.danger {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
      background: rgba(127, 29, 29, 0.5);
    }

    .kpi-mini-row {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #9ca3af;
    }

    .kpi-mini-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .kpi-mini-label {
      color: #6b7280;
    }

    .kpi-mini-value {
      color: #e5e7eb;
      font-weight: 500;
    }

    .status-pill {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.75);
      background: rgba(22, 101, 52, 0.2);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-pill.alert {
      border-color: rgba(248, 113, 113, 0.8);
      background: rgba(127, 29, 29, 0.45);
      color: #fee2e2;
    }

    .status-pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.5),
        0 0 9px rgba(22, 163, 74, 0.95);
    }

    .status-pill.alert span.dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 9px rgba(248, 113, 113, 0.95);
    }

    .chart-container {
      position: relative;
      width: 100%;
      min-height: 120px;
      height: 140px;
    }

    .chart-container canvas {
      width: 100% !important;
      height: 100% !important;
    }

    .badges-row {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 2px;
    }

    .badge-chip {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge-chip strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .badge-chip .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.95);
    }

    .badge-chip.success {
      border-color: rgba(34, 197, 94, 0.75);
      color: #bbf7d0;
    }

    .badge-chip.success .dot {
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.5),
        0 0 10px rgba(22, 163, 74, 0.95);
    }

    .badge-chip.warning {
      border-color: rgba(234, 179, 8, 0.85);
      color: #fef9c3;
    }

    .badge-chip.warning .dot {
      background: radial-gradient(circle, #facc15, #eab308);
      box-shadow:
        0 0 0 1px rgba(234, 179, 8, 0.5),
        0 0 10px rgba(234, 179, 8, 0.95);
    }

    .badge-chip.danger {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
    }

    .badge-chip.danger .dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 10px rgba(248, 113, 113, 0.95);
    }

    .two-col-row {
      display: grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 8px;
      min-height: 0;
    }

    .checklist-upload {
      border-radius: 14px;
      padding: 8px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px dashed rgba(75, 85, 99, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 0;
    }

    .checklist-upload-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .checklist-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .checklist-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #e5e7eb;
    }

    .checklist-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .checklist-sub span {
      color: #e5e7eb;
      font-weight: 500;
    }

    .checklist-upload-body {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn-upload {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.85);
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.98));
      color: #e0f2fe;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 18px rgba(56, 189, 248, 0.8);
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-upload:hover {
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.45), rgba(15, 23, 42, 0.98));
      transform: translateY(-1px);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 22px rgba(56, 189, 248, 0.85);
    }

    .btn-upload:active {
      transform: translateY(0);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 16px rgba(56, 189, 248, 0.7);
    }

    .btn-upload input {
      display: none;
    }

    .btn-upload-glow {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.45), transparent 60%);
      mix-blend-mode: screen;
      opacity: 0.5;
      pointer-events: none;
    }

    .checklist-file-info {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .checklist-file-name {
      font-size: 11px;
      color: #e5e7eb;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .checklist-file-sub {
      font-size: 10px;
      color: #6b7280;
    }

    .checklist-kpi-row {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 10px;
      color: #9ca3af;
    }

    .checklist-kpi-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .checklist-kpi-label {
      color: #6b7280;
    }

    .checklist-kpi-value {
      color: #e5e7eb;
      font-weight: 500;
    }

    .checklist-kpi-hit {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.75);
      background: rgba(22, 101, 52, 0.25);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .checklist-kpi-hit.off {
      border-color: rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.95);
      color: #9ca3af;
    }

    .checklist-kpi-hit span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.5),
        0 0 9px rgba(22, 163, 74, 0.95);
    }

    .checklist-kpi-hit.off span.dot {
      background: rgba(148, 163, 184, 0.9);
      box-shadow: none;
    }

    .summary-card {
      border-radius: 14px;
      padding: 8px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .summary-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .summary-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .summary-title {
      font-size: 11px;
      color: #e5e7eb;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .summary-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .summary-body {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .summary-kpi-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .summary-kpi-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .summary-kpi-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .summary-kpi-value {
      font-size: 16px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .summary-kpi-sub {
      font-size: 11px;
      color: #6b7280;
    }

    .summary-pill {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .summary-pill.alert {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
    }

    .summary-pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .summary-pill.alert span.dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 10px rgba(248, 113, 113, 0.95);
    }

    .summary-mini-row {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
    }

    .summary-mini-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .summary-mini-label {
      color: #6b7280;
    }

    .summary-mini-value {
      color: #e5e7eb;
      font-weight: 500;
    }

    .assessment-card {
      border-radius: 14px;
      padding: 8px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .assessment-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .assessment-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .assessment-title {
      font-size: 11px;
      color: #e5e7eb;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .assessment-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .assessment-body {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .assessment-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .assessment-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .assessment-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .assessment-value {
      font-size: 14px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .assessment-tag {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .assessment-tag.critical {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
    }

    .assessment-tag.warning {
      border-color: rgba(234, 179, 8, 0.85);
      color: #fef9c3;
    }

    .assessment-tag span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .assessment-tag.critical span.dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 10px rgba(248, 113, 113, 0.95);
    }

    .assessment-tag.warning span.dot {
      background: radial-gradient(circle, #facc15, #eab308);
      box-shadow:
        0 0 0 1px rgba(234, 179, 8, 0.5),
        0 0 10px rgba(234, 179, 8, 0.95);
    }

    .visit-evolution {
      border-radius: 14px;
      padding: 8px;
      background: radial-gradient(circle at 100% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .visit-evolution-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .visit-evolution-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .visit-evolution-title {
      font-size: 11px;
      color: #e5e7eb;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .visit-evolution-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .visit-evolution-body {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .visit-evolution-stats {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .visit-evolution-stat {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .visit-evolution-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .visit-evolution-value {
      font-size: 14px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .visit-evolution-tag {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .visit-evolution-tag span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .visit-evolution-chart {
      position: relative;
      width: 100%;
      min-height: 120px;
      height: 130px;
    }

    .visit-evolution-chart canvas {
      width: 100% !important;
      height: 100% !important;
    }

    .dashboard-panel {
      border-radius: 16px;
      padding: 9px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow:
        0 8px 25px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 7px;
      min-height: 0;
    }

    .dashboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .dashboard-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .dashboard-title {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .dashboard-pill {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .dashboard-subtitle {
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .dashboard-subtitle span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .dashboard-subtitle strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .dashboard-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .dashboard-filters {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pill-filter {
      font-size: 10px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.95);
      background: rgba(15, 23, 42, 0.98);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.08s ease;
    }

    .pill-filter span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.8);
    }

    .pill-filter.active {
      border-color: rgba(56, 189, 248, 0.85);
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.98));
      color: #e0f2fe;
      transform: translateY(-1px);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 0 16px rgba(56, 189, 248, 0.8);
    }

    .pill-filter.active span.dot {
      background: radial-gradient(circle, #4ade80, #22c55e);
      box-shadow:
        0 0 0 1px rgba(34, 197, 94, 0.6),
        0 0 8px rgba(34, 197, 94, 0.95);
    }

    .dashboard-body {
      display: grid;
      grid-template-columns: 1.1fr 1.3fr;
      gap: 8px;
      min-height: 0;
    }

    .dashboard-left {
      display: flex;
      flex-direction: column;
      gap: 7px;
      min-height: 0;
    }

    .dashboard-right {
      display: flex;
      flex-direction: column;
      gap: 7px;
      min-height: 0;
    }

    .chart-card {
      border-radius: 14px;
      padding: 8px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow:
        0 8px 20px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 0;
    }

    .chart-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .chart-card-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .chart-card-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #e5e7eb;
    }

    .chart-card-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .chart-card-meta {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chart-card-meta span {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chart-card-meta span strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .chart-wrapper {
      position: relative;
      width: 100%;
      min-height: 140px;
      height: 170px;
    }

    .chart-wrapper canvas {
      width: 100% !important;
      height: 100% !important;
    }

    .global-kpi-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 11px;
      color: #9ca3af;
    }

    .global-kpi-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .global-kpi-label {
      color: #6b7280;
    }

    .global-kpi-value {
      color: #e5e7eb;
      font-weight: 500;
    }

    .global-kpi-tag {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .global-kpi-tag span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .global-kpi-tag.alert {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
    }

    .global-kpi-tag.alert span.dot {
      background: radial-gradient(circle, #fb7185, #f97373);
      box-shadow:
        0 0 0 1px rgba(248, 113, 113, 0.5),
        0 0 10px rgba(248, 113, 113, 0.95);
    }

    .list-card {
      border-radius: 14px;
      padding: 8px;
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(55, 65, 81, 0.95);
      box-shadow:
        0 8px 20px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 0;
    }

    .list-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .list-card-title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .list-card-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #e5e7eb;
    }

    .list-card-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .list-card-body {
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: 150px;
      overflow-y: auto;
    }

    .list-card-body::-webkit-scrollbar {
      width: 6px;
    }

    .list-card-body::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 999px;
    }

    .list-card-body::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(148, 163, 184, 0.7), rgba(148, 163, 184, 0.1));
      border-radius: 999px;
    }

    .list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      padding: 5px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(55, 65, 81, 0.95);
      font-size: 11px;
      color: #9ca3af;
    }

    .list-item-main {
      display: flex;
      align-items: center;
      gap: 6px;
      min-width: 0;
      flex: 1;
    }

    .list-item-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #38bdf8, #0ea5e9);
      box-shadow:
        0 0 0 1px rgba(56, 189, 248, 0.6),
        0 0 10px rgba(56, 189, 248, 0.9);
    }

    .list-item-name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: #e5e7eb;
    }

    .list-item-kpi {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 10px;
    }

    .list-item-kpi strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .list-item-tag {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
      white-space: nowrap;
    }

    .pill-legend {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #9ca3af;
    }

    .pill-legend span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
    }

    .pill-legend span.dot.process {
      background: radial-gradient(circle, #38bdf8, #0ea5e9);
      box-shadow:
        0 0 0 1px rgba(56, 189, 248, 0.6),
        0 0 10px rgba(56, 189, 248, 0.9);
    }

    .pill-legend span.dot.prueba {
      background: radial-gradient(circle, #22c55e, #16a34a);
      box-shadow:
        0 0 0 1px rgba(22, 163, 74, 0.5),
        0 0 10px rgba(22, 163, 74, 0.9);
    }

    .pill-legend span.dot.venta {
      background: radial-gradient(circle, #f97316, #ea580c);
      box-shadow:
        0 0 0 1px rgba(234, 88, 12, 0.5),
        0 0 10px rgba(234, 88, 12, 0.9);
    }

    @media (max-width: 1200px) {
      .app-shell {
        flex-direction: column;
        max-height: none;
      }

      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      }

      .main {
        max-height: none;
      }

      .content {
        grid-template-columns: 1fr;
      }

      .dashboard-body {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 900px) {
      body {
        padding: 10px;
      }

      .app-shell {
        border-radius: 18px;
      }

      .topbar-title {
        font-size: 16px;
      }

      .panel {
        border-radius: 16px;
      }

      .dashboard-panel {
        border-radius: 16px;
      }

      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 700px) {
      .main-topbar {
        flex-direction: column;
        align-items: stretch;
      }

      .topbar-right {
        width: 100%;
        justify-content: space-between;
      }

      .topbar-search {
        order: 2;
      }

      .topbar-controls {
        order: 1;
      }

      .two-col-row {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 520px) {
      .sidebar-footer-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .sidebar-footer-kpi {
        text-align: left;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-block">
          <div class="logo-cube">
            <div class="logo-inner">CC</div>
            <div class="logo-glow"></div>
          </div>
          <div class="logo-text-block">
            <div class="product-name">
              CONTROL CENTER AUDIO
              <span class="product-dot"></span>
            </div>
            <div class="product-subtitle">
              Seguimiento visitas  Procesos  Ventas
            </div>
          </div>
        </div>
        <div class="sidebar-header-right">
          <div class="tag-env">Versin prototipo</div>
          <div class="sidebar-date">
            <span class="sidebar-date-dot"></span>
            <span id="sidebarDate">Hoy</span>
          </div>
        </div>
      </div>

      <div class="sidebar-main">
        <section class="sidebar-section">
          <div class="sidebar-section-header">
            <div class="sidebar-section-title">
              <div class="sidebar-title-main">
                Centros piloto
                <span class="sidebar-pill">Panel de seguimiento</span>
              </div>
              <div class="sidebar-title-sub">
                Selecciona un centro para ver sus KPIs de visita y checklist
              </div>
            </div>
            <div class="sidebar-section-controls">
              <div class="tiny-pill">
                <span>Asignacin visitas</span>
              </div>
              <div class="tiny-indicator"></div>
            </div>
          </div>

          <div class="centers-list" id="centersList">
          </div>

          <div class="sidebar-metrics">
            <div class="sidebar-metrics-header">
              <div>
                <div class="sidebar-metrics-title">
                  <span class="sidebar-dot"></span>
                  Resumen visita centro
                </div>
                <div class="sidebar-metrics-sub">
                  KPIs clave del centro seleccionado
                </div>
              </div>
            </div>
            <div class="sidebar-metrics-grid">
              <div class="sidebar-kpi-pill">
                <div class="sidebar-kpi-label">% Aplicacin procesos</div>
                <div class="sidebar-kpi-value" id="kpiCentroProcesos">-</div>
              </div>
              <div class="sidebar-kpi-pill">
                <div class="sidebar-kpi-label">% Conversin a prueba</div>
                <div class="sidebar-kpi-value" id="kpiCentroPrueba">-</div>
              </div>
              <div class="sidebar-kpi-pill">
                <div class="sidebar-kpi-label">% Conversin a venta</div>
                <div class="sidebar-kpi-value" id="kpiCentroVenta">-</div>
              </div>
              <div class="sidebar-kpi-pill">
                <div class="sidebar-kpi-label">Aplica HIT</div>
                <div class="sidebar-kpi-value" id="kpiCentroHit">-</div>
              </div>
            </div>
          </div>
        </section>

        <div class="sidebar-footer">
          <div class="sidebar-footer-row">
            <div class="sidebar-user">
              <div class="user-avatar">B</div>
              <div class="user-info">
                <div class="user-name">Boris  Responsable proyecto</div>
                <div class="user-role">Seguimiento procesos & ventas</div>
              </div>
            </div>
            <div class="sidebar-footer-kpi">
              <span>Impacto global</span>
              <div>
                Checklist cargados: <span id="contadorChecklists">3 demo</span>
              </div>
            </div>
          </div>
          <button class="btn-compact btn-compact-primary" id="btnMostrarDemo">
            <span class="dot-badge"></span>
            Cargar / reset datos demo
          </button>
        </div>
      </div>
    </aside>

    <main class="main">
      <div class="main-topbar">
        <div class="topbar-left">
          <div class="topbar-title-row">
            <div class="topbar-title-main">
              <div class="topbar-title">
                Monitor de procesos & ventas
                <span class="topbar-kpi-chip">
                  <span>Objetivo global:</span>
                  <strong>Aplicacin procesos  80%  HIT activo</strong>
                </span>
              </div>
              <div class="topbar-subtitle">
                <span>
                  <span class="topbar-subtitle-badge">Visitas con checklist</span>
                </span>
                <span>
                  Centros piloto activos:
                  <strong id="contadorCentros">3 demo</strong>
                </span>
                <span>
                  ltima visita analizada:
                  <strong id="ultimaVisita">-</strong>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="topbar-right">
          <div class="topbar-search">
            <span class="topbar-search-icon"></span>
            <input id="searchCentro" type="text" placeholder="Buscar centro por nombre o zona..." />
          </div>
          <div class="topbar-controls">
            <div class="pill-toggle-group" id="modoPanelGroup">
              <button class="pill-toggle active" data-modo="centro">
                <span class="dot"></span>
                Vista centro
              </button>
              <button class="pill-toggle" data-modo="global">
                <span class="dot"></span>
                Vista global
              </button>
            </div>
            <div class="pill-toggle-date">
              <span class="dot"></span>
              <div>
                <div><strong>Periodo</strong>  <span id="periodoLabel">Manual / checklist</span></div>
                <small>Sincronizado con visitas</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <section class="content">
        <section class="panel" id="panelCentro">
          <header class="panel-header">
            <div class="panel-title-block">
              <div class="panel-title-row">
                <div class="panel-title">
                  Informe de la visita al centro
                  <span class="panel-pill" id="tipoCentroPill">Centro demo</span>
                </div>
              </div>
              <div class="panel-subtitle">
                <span>
                  Centro:
                  <strong id="nombreCentroSeleccionado">Selecciona un centro</strong>
                </span>
                <span>
                  Tipo checklist:
                  <strong id="tipoChecklist">-</strong>
                </span>
                <span>
                  Fecha visita:
                  <strong id="fechaVisita">-</strong>
                </span>
              </div>
            </div>
            <div class="panel-actions">
              <div class="pill-indicator alert" id="estadoProcesosPill">
                <span class="dot"></span>
                Estado procesos:
                <strong id="estadoProcesosLabel">Pendiente checklist</strong>
              </div>
            </div>
          </header>

          <div class="panel-body">
            <div class="grid-2">
              <article class="card">
                <header class="card-header">
                  <div>
                    <div class="card-title">KPIs de la visita</div>
                    <div class="card-subtitle">Resumen rpido de procesos, prueba y venta</div>
                  </div>
                  <div class="badge-soft">Checklist visita</div>
                </header>
                <div class="card-body">
                  <div class="kpi-row">
                    <div class="kpi-main">
                      <div class="kpi-label">% Aplicacin procesos</div>
                      <div class="kpi-value" id="kpiProcesosVisita">-</div>
                    </div>
                    <div class="kpi-badge" id="badgeProcesosVisita">Sin datos</div>
                  </div>
                  <div class="kpi-mini-row">
                    <span>
                      <span class="kpi-mini-label">% Conversin a prueba:</span>
                      <span class="kpi-mini-value" id="kpiPruebaVisita">-</span>
                    </span>
                    <span>
                      <span class="kpi-mini-label">% Conversin a venta:</span>
                      <span class="kpi-mini-value" id="kpiVentaVisita">-</span>
                    </span>
                  </div>
                  <div class="kpi-mini-row">
                    <span>
                      <span class="kpi-mini-label">Criterios checklist aplicados:</span>
                      <span class="kpi-mini-value" id="criteriosAplicadosVisita">-</span>
                    </span>
                    <span>
                      <span class="kpi-mini-label">Criterios pendientes / mejora:</span>
                      <span class="kpi-mini-value" id="criteriosPendientesVisita">-</span>
                    </span>
                  </div>
                  <div class="kpi-mini-row">
                    <span>
                      <span class="kpi-mini-label">Aplica HIT en este centro:</span>
                      <span class="kpi-mini-value" id="hitVisitaLabel">-</span>
                    </span>
                    <span class="status-pill alert" id="estadoHitPill">
                      <span class="dot"></span>
                      HIT no activo / sin datos
                    </span>
                  </div>
                </div>
              </article>

              <article class="card">
                <header class="card-header">
                  <div>
                    <div class="card-title">Evaluacin visual de la visita</div>
                    <div class="card-subtitle">Relacin entre procesos, prueba y venta</div>
                  </div>
                  <div class="badge-soft">Vista radar</div>
                </header>
                <div class="card-body">
                  <div class="chart-container">
                    <canvas id="radarVisita"></canvas>
                  </div>
                  <div class="badges-row">
                    <div class="badge-chip success">
                      <span class="dot"></span>
                      <span>
                        Procesos aplicados:
                        <strong id="badgeProcesosPct">-</strong>
                      </span>
                    </div>
                    <div class="badge-chip">
                      <span class="dot"></span>
                      <span>
                        Conversin a prueba:
                        <strong id="badgePruebaPct">-</strong>
                      </span>
                    </div>
                    <div class="badge-chip">
                      <span class="dot"></span>
                      <span>
                        Conversin a venta:
                        <strong id="badgeVentaPct">-</strong>
                      </span>
                    </div>
                  </div>
                </div>
              </article>
            </div>

            <div class="two-col-row">
              <div class="checklist-upload">
                <div class="checklist-upload-header">
                  <div class="checklist-title-block">
                    <div class="checklist-title">Checklist de la visita</div>
                    <div class="checklist-sub">
                      Carga el checklist de visita (Excel)
                      <span>Reconoce automticamente CORNER / EXCLUSIVO</span>
                    </div>
                  </div>
                  <button class="btn-compact" id="btnVerDetalleChecklist" disabled>
                    Ver detalle checklist
                  </button>
                </div>
                <div class="checklist-upload-body">
                  <label class="btn-upload">
                    <span class="btn-upload-glow"></span>
                    <span> Subir checklist</span>
                    <input type="file" id="inputChecklist" accept=".xlsx,.xls" />
                  </label>
                  <div class="checklist-file-info">
                    <div class="checklist-file-name" id="nombreChecklist">Ningn archivo seleccionado</div>
                    <div class="checklist-file-sub">
                      % procesos desde Excel  Aplica HIT (segn celda)  Conversin a prueba y venta
                    </div>
                    <div class="checklist-kpi-row">
                      <span>
                        <span class="checklist-kpi-label">% Procesos:</span>
                        <span class="checklist-kpi-value" id="checklistProcesos">-</span>
                      </span>
                      <span>
                        <span class="checklist-kpi-label">% Prueba:</span>
                        <span class="checklist-kpi-value" id="checklistPrueba">-</span>
                      </span>
                      <span>
                        <span class="checklist-kpi-label">% Venta:</span>
                        <span class="checklist-kpi-value" id="checklistVenta">-</span>
                      </span>
                      <span id="checklistHitWrapper" class="checklist-kpi-hit off">
                        <span class="dot"></span>
                        <span id="checklistHitLabel">HIT no activo / sin datos</span>
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="summary-card">
                <div class="summary-header">
                  <div class="summary-title-block">
                    <div class="summary-title">Resumen cualitativo de la visita</div>
                    <div class="summary-subtitle">
                      Lectura automtica del checklist  Prximos pasos sugeridos
                    </div>
                  </div>
                  <div class="summary-pill" id="resumenEstadoPill">
                    <span class="dot"></span>
                    Sin checklist cargado
                  </div>
                </div>
                <div class="summary-body">
                  <div class="summary-kpi-row">
                    <div class="summary-kpi-main">
                      <div class="summary-kpi-label">Nivel de aplicacin de procesos</div>
                      <div class="summary-kpi-value" id="resumenProcesosNivel">-</div>
                      <div class="summary-kpi-sub" id="resumenProcesosTexto">
                        Carga el checklist para obtener una lectura rpida del nivel de procesos en este centro.
                      </div>
                    </div>
                  </div>
                  <div class="summary-mini-row">
                    <span>
                      <span class="summary-mini-label">Conversin a prueba y venta:</span>
                      <span class="summary-mini-value" id="resumenConversionTexto">-</span>
                    </span>
                  </div>
                  <div class="summary-mini-row">
                    <span>
                      <span class="summary-mini-label">HIT:</span>
                      <span class="summary-mini-value" id="resumenHitTexto">-</span>
                    </span>
                  </div>
                  <div class="summary-mini-row">
                    <span>
                      <span class="summary-mini-label">Recomendacin prxima visita:</span>
                      <span class="summary-mini-value" id="resumenRecomendacion">-</span>
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="two-col-row">
              <div class="assessment-card">
                <div class="assessment-header">
                  <div class="assessment-title-block">
                    <div class="assessment-title">Evaluacin del potencial del centro</div>
                    <div class="assessment-subtitle">
                      Relacin entre nivel de procesos, HIT y conversin a ventas
                    </div>
                  </div>
                  <div class="assessment-tag" id="potencialCentroPill">
                    <span class="dot"></span>
                    Sin datos suficientes
                  </div>
                </div>
                <div class="assessment-body">
                  <div class="assessment-row">
                    <div class="assessment-main">
                      <div class="assessment-label">Lectura global del potencial</div>
                      <div class="assessment-value" id="potencialCentroTexto">-</div>
                    </div>
                  </div>
                  <div class="assessment-row">
                    <div class="assessment-main">
                      <div class="assessment-label">Prioridad en plan de accin</div>
                      <div class="assessment-value" id="prioridadCentroTexto">-</div>
                    </div>
                  </div>
                  <div class="assessment-row">
                    <div class="assessment-main">
                      <div class="assessment-label">Accin recomendada</div>
                      <div class="assessment-value" id="accionRecomendadaTexto">-</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="visit-evolution">
                <div class="visit-evolution-header">
                  <div class="visit-evolution-title-block">
                    <div class="visit-evolution-title">Evolucin vs visitas anteriores (demo)</div>
                    <div class="visit-evolution-subtitle">
                      Comparativa con hasta 4 visitas anteriores para este centro
                    </div>
                  </div>
                  <div class="visit-evolution-tag">
                    <span class="dot"></span>
                    Historia demo
                  </div>
                </div>
                <div class="visit-evolution-body">
                  <div class="visit-evolution-stats">
                    <div class="visit-evolution-stat">
                      <div class="visit-evolution-label">Tendencia de procesos</div>
                      <div class="visit-evolution-value" id="tendenciaProcesosTexto">-</div>
                    </div>
                    <div class="visit-evolution-stat">
                      <div class="visit-evolution-label">Tendencia conversin</div>
                      <div class="visit-evolution-value" id="tendenciaConversionTexto">-</div>
                    </div>
                  </div>
                  <div class="visit-evolution-chart">
                    <canvas id="lineaHistoricoCentro"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="dashboard-panel" id="panelGlobal">
          <header class="dashboard-header">
            <div class="dashboard-title-block">
              <div class="dashboard-title">
                Dashboard global de procesos & ventas
                <span class="dashboard-pill">Pilotaje inicial</span>
              </div>
              <div class="dashboard-subtitle">
                <span>
                  Centros incluidos:
                  <strong id="dashboardCentrosIncluidos">3 demo</strong>
                </span>
                <span>
                  Checklists analizados:
                  <strong id="dashboardChecklistsAnalizados">3 demo</strong>
                </span>
                <span>
                  Media global aplicacin procesos:
                  <strong id="dashboardMediaProcesos">-</strong>
                </span>
              </div>
            </div>
            <div class="dashboard-actions">
              <div class="dashboard-filters">
                <button class="pill-filter active" data-filtro="todos">
                  <span class="dot"></span>
                  Todos los centros
                </button>
                <button class="pill-filter" data-filtro="hit">
                  <span class="dot"></span>
                  Solo centros con HIT
                </button>
                <button class="pill-filter" data-filtro="baja">
                  <span class="dot"></span>
                  Centros con procesos &lt; 60%
                </button>
              </div>
            </div>
          </header>

          <div class="dashboard-body">
            <div class="dashboard-left">
              <article class="chart-card">
                <div class="chart-card-header">
                  <div class="chart-card-title-block">
                    <div class="chart-card-title">Comparativa de procesos por centro</div>
                    <div class="chart-card-subtitle">
                      Cada barra representa el % de aplicacin de procesos de un centro con checklist.
                    </div>
                  </div>
                  <div class="chart-card-meta">
                    <span>
                      Media global:
                      <strong id="chartMediaProcesos">-</strong>
                    </span>
                    <span>
                      Desviacin aprox:
                      <strong id="chartDesviacionProcesos">-</strong>
                    </span>
                  </div>
                </div>
                <div class="chart-wrapper">
                  <canvas id="barrasProcesosCentro"></canvas>
                </div>
                <div class="global-kpi-row">
                  <span>
                    <span class="global-kpi-label">Centro con mayor aplicacin de procesos:</span>
                    <span class="global-kpi-value" id="mejorCentroProcesos">-</span>
                  </span>
                  <span>
                    <span class="global-kpi-label">Centro con menor aplicacin de procesos:</span>
                    <span class="global-kpi-value" id="peorCentroProcesos">-</span>
                  </span>
                  <span class="global-kpi-tag" id="alertaProcesosGlobalPill">
                    <span class="dot"></span>
                    Sin alertas crticas globales
                  </span>
                </div>
              </article>

              <article class="chart-card">
                <div class="chart-card-header">
                  <div class="chart-card-title-block">
                    <div class="chart-card-title">Relacin procesos  prueba  venta</div>
                    <div class="chart-card-subtitle">
                      Media global de la cadena completa: aplicacin de procesos  prueba  venta
                    </div>
                  </div>
                  <div class="chart-card-meta">
                    <span>
                      Centros con HIT activo:
                      <strong id="centrosHitActivos">-</strong>
                    </span>
                    <span>
                      Centros con procesos  80%:
                      <strong id="centrosProcesosAltos">-</strong>
                    </span>
                  </div>
                </div>
                <div class="chart-wrapper">
                  <canvas id="barrasCadenaGlobal"></canvas>
                </div>
                <div class="global-kpi-row">
                  <span>
                    <span class="global-kpi-label">Nivel medio de procesos (global):</span>
                    <span class="global-kpi-value" id="nivelProcesosGlobalTexto">-</span>
                  </span>
                  <span>
                    <span class="global-kpi-label">Equilibrio prueba / venta:</span>
                    <span class="global-kpi-value" id="equilibrioPruebaVentaTexto">-</span>
                  </span>
                </div>
                <div class="global-kpi-row">
                  <span>
                    <span class="global-kpi-label">Recomendacin a nivel de red:</span>
                    <span class="global-kpi-value" id="recomendacionRedTexto">-</span>
                  </span>
                </div>
              </article>
            </div>

            <div class="dashboard-right">
              <article class="chart-card">
                <div class="chart-card-header">
                  <div class="chart-card-title-block">
                    <div class="chart-card-title">Evaluacin detallada de procesos (80 criterios)</div>
                    <div class="chart-card-subtitle">
                      % de cumplimiento de cada criterio a partir de todos los checklists analizados.
                    </div>
                  </div>
                  <div class="chart-card-meta">
                    <span>
                      N criterios analizados:
                      <strong id="numeroCriteriosAnalizados">Demo 80</strong>
                    </span>
                  </div>
                </div>
                <div class="chart-wrapper">
                  <canvas id="barrasCriterios"></canvas>
                </div>
                <div class="global-kpi-row">
                  <span>
                    <span class="global-kpi-label">Criterios con menor aplicacin (&lt; 60%):</span>
                    <span class="global-kpi-value" id="criteriosDebilesTexto">-</span>
                  </span>
                </div>
              </article>

              <article class="list-card">
                <header class="list-card-header">
                  <div class="list-card-title-block">
                    <div class="list-card-title">Centros priorizados para seguimiento</div>
                    <div class="list-card-subtitle">
                      Ordenados segn combinacin de procesos, HIT y conversin a venta.
                    </div>
                  </div>
                  <div class="pill-legend">
                    <span class="dot process"></span>
                    <span>Procesos</span>
                    <span class="dot prueba"></span>
                    <span>Prueba</span>
                    <span class="dot venta"></span>
                    <span>Venta</span>
                  </div>
                </header>
                <div class="list-card-body" id="listaCentrosPrioridad">
                </div>
              </article>
            </div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    const demoCentros = [
      {
        id: "centro1",
        centro: "AA AUDIO CORNER TETUN",
        tipo: "CORNER",
        zona: "Madrid",
        asignado: "Boris",
        fechaVisita: "2025-05-20",
        procesosPct: 72,
        convPruebaPct: 55,
        convVentaPct: 32,
        hit: true,
        criteriosTotal: 80,
        criteriosAplicados: 58,
        historico: [
          { visita: "Visita -3", procesos: 60, prueba: 45, venta: 25 },
          { visita: "Visita -2", procesos: 65, prueba: 48, venta: 28 },
          { visita: "Visita -1", procesos: 68, prueba: 50, venta: 29 },
          { visita: "Visita actual", procesos: 72, prueba: 55, venta: 32 }
        ]
      },
      {
        id: "centro2",
        centro: "AA AUDIO CORNER REINA MERCEDES",
        tipo: "CORNER",
        zona: "Madrid",
        asignado: "Boris",
        fechaVisita: "2025-05-22",
        procesosPct: 58,
        convPruebaPct: 40,
        convVentaPct: 26,
        hit: false,
        criteriosTotal: 80,
        criteriosAplicados: 46,
        historico: [
          { visita: "Visita -2", procesos: 50, prueba: 35, venta: 23 },
          { visita: "Visita -1", procesos: 55, prueba: 38, venta: 24 },
          { visita: "Visita actual", procesos: 58, prueba: 40, venta: 26 }
        ]
      },
      {
        id: "centro3",
        centro: "AA AUDIO EXCLUSIVO BARRIO SALAMANCA",
        tipo: "EXCLUSIVO",
        zona: "Madrid",
        asignado: "Boris",
        fechaVisita: "2025-05-24",
        procesosPct: 88,
        convPruebaPct: 62,
        convVentaPct: 41,
        hit: true,
        criteriosTotal: 80,
        criteriosAplicados: 70,
        historico: [
          { visita: "Visita -3", procesos: 78, prueba: 55, venta: 34 },
          { visita: "Visita -2", procesos: 82, prueba: 58, venta: 36 },
          { visita: "Visita -1", procesos: 85, prueba: 60, venta: 38 },
          { visita: "Visita actual", procesos: 88, prueba: 62, venta: 41 }
        ]
      }
    ];

    let centros = [...demoCentros];
    let centroActual = null;
    let modoPanel = "centro";
    let criteriosGlobal = new Map();
    let criteriosDemoActivo = true;

    let radarVisitaChart = null;
    let lineaHistoricoCentroChart = null;
    let barrasProcesosCentroChart = null;
    let barrasCadenaGlobalChart = null;
    let barrasCriteriosChart = null;

    function fmtPct(n, decimals=0) {
      if (n === null || n === undefined || isNaN(n)) return "-";
      return Number(n).toFixed(decimals) + "%";
    }

    function clampPct(n) {
      if (n === null || n === undefined || isNaN(n)) return 0;
      return Math.max(0, Math.min(100, Number(n)));
    }

    function normalizarPorcentaje(valor) {
      if (valor === null || valor === undefined) return 0;
      if (typeof valor === "string") {
        const v = valor.trim().replace("%", "").replace(",", ".");
        if (!v) return 0;
        let num = parseFloat(v);
        if (isNaN(num)) return 0;
        if (num <= 1 && num >= 0) {
          num = num * 100;
        }
        return num;
      }
      if (typeof valor === "number") {
        let num = valor;
        if (num <= 1 && num >= 0) {
          num = num * 100;
        }
        return num;
      }
      return 0;
    }

    function interpretarNivelProcesos(pct) {
      if (pct === null || pct === undefined || isNaN(pct)) {
        return { nivel: "Sin datos", texto: "Carga un checklist para evaluar el nivel de procesos.", estado: "sin-datos" };
      }
      const n = clampPct(pct);
      if (n >= 85) {
        return {
          nivel: "Muy alto",
          texto: "El centro presenta un nivel muy alto de aplicacin de procesos. Es buen candidato para consolidar HIT y replicar buenas prcticas.",
          estado: "alto"
        };
      }
      if (n >= 70) {
        return {
          nivel: "Alto",
          texto: "Buen nivel de aplicacin de procesos, con margen de mejora en algunos criterios especficos.",
          estado: "medio-alto"
        };
      }
      if (n >= 55) {
        return {
          nivel: "Medio",
          texto: "Nivel de procesos intermedio. Recomendable reforzar los criterios con menor aplicacin para consolidar la base.",
          estado: "medio"
        };
      }
      return {
        nivel: "Bajo",
        texto: "Nivel de procesos bajo. Este centro debera ser priorizado en el plan de accin para asegurar la base antes de empujar HIT o campaas.",
        estado: "bajo"
      };
    }

    function interpretarConversion(prueba, venta) {
      const p = clampPct(prueba);
      const v = clampPct(venta);
      if (isNaN(p) && isNaN(v)) {
        return "Sin datos de conversin.";
      }
      let texto = `Prueba ${fmtPct(p)}  Venta ${fmtPct(v)}. `;
      if (p >= 60 && v >= 35) {
        texto += "La cadena prueba  venta est trabajando de forma slida.";
      } else if (p >= 55 && v < 35) {
        texto += "Buena conversin a prueba, pero hay margen importante de mejora en la conversin a venta.";
      } else if (p < 55 && v >= 35) {
        texto += "Conversin a venta aceptable, pero el volumen de prueba podra ser mayor para aprovechar el potencial.";
      } else {
        texto += "Tanto la conversin a prueba como a venta presentan margen de mejora. Priorizar refuerzo de flujo completo.";
      }
      return texto;
    }

    function interpretarHit(hit, procesosPct) {
      const p = clampPct(procesosPct);
      if (!hit && (procesosPct === null || procesosPct === undefined || isNaN(procesosPct))) {
        return "Sin datos suficientes de HIT / procesos.";
      }
      if (hit && p >= 75) {
        return "HIT activo con buena base de procesos. Enfocar en mantener consistencia y escalar volumen de oportunidades.";
      }
      if (hit && p < 75) {
        return "HIT activo, pero con base de procesos an por consolidar. Recomendable reforzar criterios clave para que el impacto de HIT sea sostenible.";
      }
      if (!hit && p >= 70) {
        return "Buena base de procesos. Este centro es buen candidato para activar HIT o campaas especficas.";
      }
      return "HIT no activo y base de procesos por debajo del umbral ptimo. Priorizar primero la mejora de procesos antes de activar HIT.";
    }

    function interpretarRecomendacionVisita(pctProcesos, prueba, venta, hit) {
      const p = clampPct(pctProcesos);
      const pr = clampPct(prueba);
      const v = clampPct(venta);

      if (isNaN(p)) {
        return "Realizar checklist estructurado en la prxima visita para poder priorizar acciones de forma objetiva.";
      }
      if (p < 60) {
        return "Programar visita de refuerzo centrada en procesos bsicos (acogida, cribado, derivacin a prueba) y revisar con el centro los criterios no aplicados.";
      }
      if (p >= 60 && p < 75 && !hit) {
        return "En la prxima visita, trabajar sobre criterios especficos con baja aplicacin y valorar activar HIT una vez consolidada la base.";
      }
      if (p >= 75 && !hit) {
        return "Valorar activacin de HIT / campaas especficas en este centro, manteniendo seguimiento de los procesos para no perder consistencia.";
      }
      if (p >= 75 && hit && (pr < 55 || v < 30)) {
        return "Revisar junto al centro el embudo desde procesos hasta venta: identificar fugas entre prueba y cierre.";
      }
      return "Mantener seguimiento peridico, compartiendo con el centro los buenos resultados y detectando micro-mejoras en criterios concretos.";
    }

    function interpretarPotencialCentro(pctProcesos, prueba, venta, hit) {
      const p = clampPct(pctProcesos);
      const pr = clampPct(prueba);
      const v = clampPct(venta);

      if (isNaN(p)) {
        return {
          potencial: "Sin datos suficientes",
          prioridad: "Pendiente checklist",
          accion: "Realizar una primera visita con checklist completo para definir el punto de partida.",
          estado: "sin-datos"
        };
      }

      if (p >= 80 && pr >= 55 && v >= 35 && hit) {
        return {
          potencial: "Centro tractor",
          prioridad: "Alta para consolidar y replicar",
          accion: "Utilizar este centro como referencia: documentar buenas prcticas y compartirlas con otros centros.",
          estado: "tractor"
        };
      }

      if (p >= 70 && pr >= 50 && v >= 30) {
        return {
          potencial: "Alto potencial",
          prioridad: "Media / alta",
          accion: "Refinar criterios con menor aplicacin y trabajar palancas concretas para subir la conversin a venta.",
          estado: "alto"
        };
      }

      if (p >= 55 && (pr < 50 || v < 30)) {
        return {
          potencial: "Potencial medio",
          prioridad: "Media",
          accion: "Consolidar procesos y trabajar acompaamiento en cierre/venta para aprovechar mejor la base de prueba.",
          estado: "medio"
        };
      }

      return {
        potencial: "Potencial a desarrollar",
        prioridad: "Alta (base a construir)",
        accion: "Priorizar este centro en el plan de visitas para asegurar una base mnima de procesos y embudo prueba/venta.",
        estado: "bajo"
      };
    }

    function actualizarSidebarDate() {
      const el = $("#sidebarDate");
      const ahora = new Date();
      const opciones = { day: "2-digit", month: "2-digit", year: "numeric" };
      const fechaStr = ahora.toLocaleDateString("es-ES", opciones);
      el.textContent = `Hoy  ${fechaStr}`;
    }

    function renderCentrosList() {
      const cont = $("#centersList");
      cont.innerHTML = "";
      const filtro = $("#searchCentro").value.trim().toLowerCase();

      const filtrados = centros.filter(c => {
        if (!filtro) return true;
        const texto = `${c.centro} ${c.zona} ${c.tipo} ${c.asignado}`.toLowerCase();
        return texto.includes(filtro);
      });

      filtrados.forEach(c => {
        const row = document.createElement("div");
        row.className = "center-row";
        row.dataset.id = c.id;

        if (centroActual && centroActual.id === c.id) {
          row.classList.add("active");
        }

        row.innerHTML = `
          <div class="center-row-main">
            <div class="center-name-line">
              <div class="center-name">${c.centro}</div>
              <div class="center-type-pill">${c.tipo}</div>
            </div>
            <div class="center-subline">
              <span>${c.zona}</span>
              <span><span class="center-subline-dot"></span>Asignado: ${c.asignado}</span>
              <span><span class="center-subline-dot"></span>ltima visita: ${c.fechaVisita}</span>
            </div>
          </div>
          <div class="center-badge">
            Procesos ${fmtPct(c.procesosPct)}  HIT ${c.hit ? "S" : "No"}
          </div>
        `;

        row.addEventListener("click", () => {
          centroActual = c;
          actualizarPanelCentro();
          actualizarSidebarKPIs();
          actualizarChartsCentro();
          renderCentrosList();
        });

        cont.appendChild(row);
      });

      $("#contadorCentros").textContent = `${filtrados.length} centros filtrados`;
    }

    function actualizarSidebarKPIs() {
      if (!centroActual) {
        $("#kpiCentroProcesos").textContent = "-";
        $("#kpiCentroPrueba").textContent = "-";
        $("#kpiCentroVenta").textContent = "-";
        $("#kpiCentroHit").textContent = "-";
        return;
      }
      $("#kpiCentroProcesos").textContent = fmtPct(centroActual.procesosPct);
      $("#kpiCentroPrueba").textContent = fmtPct(centroActual.convPruebaPct);
      $("#kpiCentroVenta").textContent = fmtPct(centroActual.convVentaPct);
      $("#kpiCentroHit").textContent = centroActual.hit ? "S" : "No";
    }

    function actualizarPanelCentro() {
      if (!centroActual) {
        $("#nombreCentroSeleccionado").textContent = "Selecciona un centro";
        $("#tipoCentroPill").textContent = "Centro demo";
        $("#fechaVisita").textContent = "-";
        $("#tipoChecklist").textContent = "-";
        $("#kpiProcesosVisita").textContent = "-";
        $("#kpiPruebaVisita").textContent = "-";
        $("#kpiVentaVisita").textContent = "-";
        $("#criteriosAplicadosVisita").textContent = "-";
        $("#criteriosPendientesVisita").textContent = "-";
        $("#hitVisitaLabel").textContent = "-";
        $("#badgeProcesosVisita").textContent = "Sin datos";
        $("#badgeProcesosVisita").className = "kpi-badge";
        $("#estadoProcesosLabel").textContent = "Pendiente checklist";
        $("#estadoProcesosPill").className = "pill-indicator alert";
        $("#ultimaVisita").textContent = "-";
        $("#nombreChecklist").textContent = "Ningn archivo seleccionado";
        $("#checklistProcesos").textContent = "-";
        $("#checklistPrueba").textContent = "-";
        $("#checklistVenta").textContent = "-";
        $("#checklistHitWrapper").className = "checklist-kpi-hit off";
        $("#checklistHitLabel").textContent = "HIT no activo / sin datos";
        $("#btnVerDetalleChecklist").disabled = true;
        $("#resumenProcesosNivel").textContent = "-";
        $("#resumenProcesosTexto").textContent = "Carga el checklist para obtener una lectura rpida del nivel de procesos en este centro.";
        $("#resumenConversionTexto").textContent = "-";
        $("#resumenHitTexto").textContent = "-";
        $("#resumenRecomendacion").textContent = "-";
        $("#resumenEstadoPill").className = "summary-pill";
        $("#resumenEstadoPill").innerHTML = '<span class="dot"></span>Sin checklist cargado';
        $("#potencialCentroTexto").textContent = "-";
        $("#prioridadCentroTexto").textContent = "-";
        $("#accionRecomendadaTexto").textContent = "-";
        $("#potencialCentroPill").className = "assessment-tag";
        $("#potencialCentroPill").innerHTML = '<span class="dot"></span>Sin datos suficientes';
        return;
      }

      $("#nombreCentroSeleccionado").textContent = centroActual.centro;
      $("#tipoCentroPill").textContent = centroActual.tipo;
      $("#fechaVisita").textContent = centroActual.fechaVisita || "-";
      $("#tipoChecklist").textContent = centroActual.tipo || "-";
      $("#ultimaVisita").textContent = centroActual.fechaVisita || "-";

      const procesos = center

